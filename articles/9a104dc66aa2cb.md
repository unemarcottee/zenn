---
title: 'å°ãƒã‚¿/AWS ã®ã‚ªãƒ—ãƒˆã‚¤ãƒ³ã—ã¦ã„ãªã„ã‚ªãƒ—ãƒˆã‚¤ãƒ³ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«å¯¾ã™ã‚‹æ“ä½œã¯èªè¨¼ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
emoji: 'ğŸ'
topics: [aws]
published: true
---

## tl;dr

- è¤‡æ•°ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§å¹³è¡Œã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’æ£šå¸ã™ã‚‹ã¨ããªã©ã§ã€èªè¨¼ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã¨ãã¯ã€ãƒ­ãƒ¼ãƒ«ã®å•é¡Œã¨ã‚ã‚ã›ã¦åˆ¥ã«ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®åˆ©ç”¨çŠ¶æ³ãŒåŒã˜ã‹ã‚‚ãƒã‚§ãƒƒã‚¯ã—ã‚ˆã†

```sh
[cloudshell-user@ip-0-0-0-0 ~]$ aws ec2 describe-regions --all-regions --query="Regions[?RegionName=='ap-east-1'].OptInStatus" --output text
not-opted-in
[cloudshell-user@ip-0-0-0-0 ~]$ aws ec2 describe-instances --region ap-east-1

An error occurred (AuthFailure) when calling the DescribeInstances operation: AWS was not able to validate the provided access credentials
```

## ãƒ¡ãƒ¢

- å­˜åœ¨ã—ãªã„ region ã®å ´åˆã¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«åˆ°é”ã§ããªã„

```sh
[cloudshell-user@ip-0-0-0-0 ~]$ aws ec2 describe-instances --region ap-east-2

Could not connect to the endpoint URL: "https://ec2.ap-east-2.amazonaws.com/"
```

- boto3 ã§ã®è¦‹ãˆã‹ãŸ

```sh
[ERROR] ClientError: An error occurred (AuthFailure) when calling the DescribeInstances operation: AWS was not able to validate the provided access credentials
Traceback (most recent call last):
  File "/var/task/lambda_function.py", line 36, in lambda_handler
    res = ec2.describe_instances(MaxResults=1000)
  File "/var/runtime/botocore/client.py", line 391, in _api_call
    return self._make_api_call(operation_name, kwargs)
  File "/var/runtime/botocore/client.py", line 719, in _make_api_call
    raise error_class(parsed_response, operation_name)
```
